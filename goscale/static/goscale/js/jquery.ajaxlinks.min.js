(function(e){e.fn.ajaxlinks=function(t){var n={load_to:"#content",load_from:null,loader:"<span>Loading...</span>",callback:null,use_sammy:false,prefix:"",smooth_height:true,goto_top:false,fix_forms:true,add_scripts:false,ajaxify_content:false};var r=e.extend(n,t);r.links=this;var i="";var s=function(t){if(r.goto_top){window.scrollTo(0,0)}var n={};if(typeof e.sammy=="function"&&r.use_sammy==true){var s=t.split("|");for(var u=0,a=s.length;u<a;u++){var f=s[u].split("=");if(f.length>2){var l=f[1];for(u=2;u<f.length;u++){var l=[l,"=",f[u]].join("")}n[f[0]]=l}else{n[f[0]]=f[1]}}}else{n.path=t}var c=function(e){var t=new Array;while(e.indexOf("<script")>-1||e.indexOf("</script")>-1){var n=e.indexOf("<script");var r=e.indexOf(">",n);var i=e.indexOf("</script",n);var s=e.indexOf(">",i);t.push(e.substring(r+1,i));e=e.substring(0,n)+e.substring(s+1)}return t};var h=function(i,s,u){e(r.load_to).addClass("ajax-loaded");if(r.smooth_height){d.height("auto")}var a=e(this).html();if(r.load_from&&i){if(e(this).find(r.load_from).length>0){a=e(this).find(r.load_from).html();d.html(a)}else{a=i;d.html(a)}}if(r.fix_forms){e('[action="."]').attr("action",t.replace("path=",""))}if(r.add_scripts){var f=new Array,l=i,h=function(e){setTimeout([e,"();"].join(""),100)},p=function(e,t){if(e===t){return true}if(e.length!=t.length){return false}for(key in e){if(e[key]!==t[key]){return false}}return true};while(l.indexOf("<script ")>-1&&l.indexOf("></script>")>-1){var v=l.indexOf("<script ");var m=l.indexOf("</script>",v);if(l.substring(v,m).indexOf("src=")>-1){var g=l.indexOf("src=",v)+5;var y=l.substring(g-1,g);var b=l.indexOf(y,g);var w=l.substring(g,b);if(l.substring(v,m).indexOf("data-callback=")>-1){var E=l.indexOf("data-callback=",v)+15;var y=l.substring(E-1,E);var S=l.indexOf(y,E);var w=[w,l.substring(E,S)]}f.push(w)}l=l.substring(0,v)+l.substring(m+9)}for(var x=1;x<f.length;x++){if(p(f[x-1],f[x])){f.splice(x,1);x--}}for(var x=0,T=f.length;x<T;x++){if(typeof f[x]!="string"){var N=f[x][0];var C=f[x][1]}else{var N=f[x];var C=false}if(e(['head script[src*="',N,'"]'].join("")).length==0){e.ajax({url:N,dataType:"script",cache:true,async:false})}else if(C){h(C)}}}if(r.ajaxify_content){o(e(r.load_to).find("a").filter(":not('.no-al a, a.no-al')"))}if(r.callback){var k=r.links.filter('[href*="'+t+'"]');var f=c(i);r.callback(a,k,n,f)}};i=n.path;var p=r.load_from?[n.path,r.load_from].join(" "):n.path,d=e(r.load_to);if(r.smooth_height){d.height(d.height())}d.html(e(r.loader)).load(p,h)};var o=function(t){var n=function(e){return!(e.indexOf(location.href.replace("http://","").replace("https://","").split("/")[0])>-1)};if(r.use_sammy){t.each(function(t,i){var s=e(i).attr("href");if(s!=undefined&&s.indexOf("#!")==-1&&!n(e(i)[0].href)){e(i).attr("href",[r.prefix,"#!path=",s].join(""))}})}else{t.each(function(t,r){if(!n(e(r)[0].href)){e(r).data("al","true");e(r).bind("click",function(){s(e(this).attr("href"));return false})}})}};if(typeof e.sammy=="function"&&r.use_sammy==true){if(e.sammy.apps==undefined){var u=e.sammy(function(){this.get(/\#!(.*)/,function(e){s(window.location.href.split("#!")[1])})});e(function(){u.run()})}o(this)}else{o(this)}}})(jQuery)